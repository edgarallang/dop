
<md-dialog class="pro-dialog" ng-controller="RedeemModalCtrl" md-theme="" flex="75" aria-label="Valida" ng-init="init()">
  <canvas id="world"></canvas>
  
  <md-dialog-content class="sticky-container" style="background-color: #f2f2f2">
    <md-subheader class="">
      <h3 style="display: inline-flex"><ng-md-icon icon="loyalty" size="26" style="fill: #333;"></ng-md-icon> Valida la visita</h3>
    </md-subheader>
    <div layout="column" class="no-padding-bottom padding-top-md">
      <h4>Verifíca que el usuario cumpla los requisitos de lealtad y valida su visita.</h4>
      <md-card class="loading" flex ng-show="loading" layout-align="center center">
        <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular>
      </md-card>
      <md-card class="loading" flex ng-show="reloadButtonFlag" layout-align="center center">
        <md-button ng-click="init()" class="md-accent md-raised super-z-index">
          Recargar
        </md-button>
      </md-card>
      <md-card ng-repeat="user in users" layout="row" layout-xs="column" layout-align="center center">
        <img ng-src="{{user.user_image}}" class="validate-logo" style="text-align: left">
        <h5 flex-xs="100" flex="15" style="text-align: left">{{user.user_name}}</h5>
        <h5 flex-xs="100" flex="30" ng-if="!user.coupon" style="text-align: left">Lealtad: {{user.loyalty_name || 'Tu sistema de lealtad'}}</h5>
        <h5 flex-xs="100" flex="65" ng-if="user.coupon" style="text-align: left">Descripción: {{user.coupon_name || ''}}</h5>
        <h5 flex-xs="100" flex ng-if="user.visit < user.goal" style="text-align: left">visitas: {{user.visit}}</h5>
        <h5 flex-xs="100" flex ng-if="user.visit < user.goal" style="text-align: left">Meta: {{user.goal}}</h5>
        <h5 flex-xs="100" flex ng-if="user.visit == user.goal && !user.coupon" style="text-align: left">Canjeando Recompensa</h5>
        <div flex="25" layout="row" layout-align="center center">
          <md-button ng-click="validate(user)" class="md-accent md-raised super-z-index">
            VALIDAR
          </md-button>
        </div>
      </md-card>
    </div>
  </md-dialog-content>
  
  <div class="md-actions">
    <md-button ng-click="hide()" class="super-z-index">
      LISTO
    </md-button>
  </div>
</md-dialog>
